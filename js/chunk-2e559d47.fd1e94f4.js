(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-2e559d47"],{"127b":function(t,e,i){"use strict";(function(t){i("7bc1"),i("3c6b");var n=i("35fb"),o=(i("f763"),i("3b54"),i("7364"),i("4868")),r=i("ac0d"),s=i("101f"),a=i("e8ec");t.ePub=o["a"],e["a"]={mixins:[r["b"]],data:function(){return{havePaginate:!1,isOnline:!1}},methods:{move:function(t){var e=0;this.firstOffsetY?(e=t.changedTouches[0].clientY-this.firstOffsetY,this.$store.commit("SET_OFFSETY",e)):this.firstOffsetY=t.changedTouches[0].clientY,t.preventDefault(),t.stopPropagation()},onMouseEnter:function(t){this.mouseMove=1,this.mouseStartTime=t.timeStamp,t.preventDefault(),t.stopPropagation()},onMouseMove:function(t){if(1===this.mouseMove)this.mouseMove=2;else if(2===this.mouseMove){var e=0;this.firstOffsetY?(e=t.clientY-this.firstOffsetY,this.$store.commit("SET_OFFSETY",e)):this.firstOffsetY=t.clientY}t.preventDefault(),t.stopPropagation()},onMouseEnd:function(t){2===this.mouseMove&&(this.$store.dispatch("setOffsetY",0),this.firstOffsetY=0,this.mouseMove=3),this.mouseEndTime=t.timeStamp;var e=this.mouseEndTime-this.mouseStartTime;e<200&&(this.mouseMove=1),t.preventDefault(),t.stopPropagation()},moveEnd:function(t){this.$store.dispatch("setOffsetY",0),this.firstOffsetY=0},onMaskClick:function(t){if(2===this.mouseMove);else if(1===this.mouseMove||4===this.mouseMove){var e=t.offsetX,i=window.innerWidth;e>0&&e<.3*i?this.prevPage():e>0&&e>.7*i?this.nextPage():this.toggleMenuVisible()}this.mouseMove=4},prevPage:function(){this.rendition&&(this.rendition.prev(),this.refreshLocation()),this.hideMenuVisible()},nextPage:function(){this.rendition&&(this.rendition.next(),this.refreshLocation()),this.hideMenuVisible()},initGuest:function(){var t=this;this.rendition.on("touchstart",(function(e){t.touchStartX=e.changedTouches[0].clientX,t.touchStartTime=e.timeStamp})),this.rendition.on("touchend",(function(e){var i=e.changedTouches[0].clientX-t.touchStartX,n=e.timeStamp-t.touchStartTime;n<500&&i>40?t.prevPage():n<500&&i<-40?t.nextPage():t.toggleMenuVisible(),e.preventDefault(),e.stopPropagation()}))},initTheme:function(){var t=Object(a["j"])(this.fileName);return t||(t=this.themeList[0].name,Object(a["u"])(this.fileName,t)),t},initFontSize:function(){var t=Object(a["d"])(this.fileName);return t||(t=16,Object(a["n"])(this.fileName,t)),t},initFontFamily:function(){var t=Object(a["c"])(this.fileName);return t||(t="Default",Object(a["m"])(this.fileName,t)),t},initRendition:function(){var t=this;this.rendition=this.book.renderTo("read",{width:window.innerWidth,height:window.innerHeight,method:"default"}),Promise.all([this.setDefaultTheme(this.initTheme()),this.setDefaultFontSize(this.initFontSize()),this.setDefaultFontFamily(this.initFontFamily())]).then((function(){if(t.switchTheme(),t.$route.query.navigation)t.display(t.$route.query.navigation);else{var e=Object(a["h"])(t.fileName);e?t.display(e):t.display()}})),this.rendition.hooks.content.register((function(t){Promise.all([t.addStylesheet("".concat("http://47.99.166.157/book/res","/fonts/daysOne.css")),t.addStylesheet("".concat("http://47.99.166.157/book/res","/fonts/tangerine.css")),t.addStylesheet("".concat("http://47.99.166.157/book/res","/fonts/montserrat.css")),t.addStylesheet("".concat("http://47.99.166.157/book/res","/fonts/cabin.css"))]).then((function(){}))}))},parseBook:function(){var t=this;this.book.loaded.metadata.then((function(e){t.setMetadata(e),Object(a["r"])(t.fileName,e)})),this.isOnline?this.book.coverUrl().then((function(e){t.setCover(e)})):this.book.loaded.cover.then((function(e){t.book.archive.createUrl(e).then((function(e){t.setCover(e)}))})),this.book.loaded.navigation.then((function(e){console.log(e);var i=function t(e){var i;return(i=[]).concat.apply(i,Object(n["a"])(e.map((function(e){return[e].concat(Object(n["a"])(t(e.subitems)))}))))}(e.toc);function o(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,n=i.filter((function(e){return e.id===t.parent}))[0];return t.parent&&n?o(n,++e):e}i.forEach((function(t){t.level=o(t),t.total=0,t.pagelist=[],t.href.match(/^(.*)\.html$/)?t.idhref=t.href.match(/^(.*)\.html$/)[1]:t.href.match(/^(.*)\.xhtml$/)&&(t.idhref=t.href.match(/^(.*)\.xhtml$/)[1])})),t.setNavigation(i)})),this.book.ready.then((function(){return t.setCurrentBook(t.book),t.book.locations.generate(window.innerWidth/375*750*(Object(a["d"])(t.fileName)/16))})).then((function(e){e.forEach((function(e){var i=e.match(/\[(.*)\]!/)[1];console.log(i),t.navigation.forEach((function(t){t.idhref&&t.idhref.indexOf(i)>=0&&t.pagelist.push(e)}));var n=1;t.navigation.forEach((function(t,e){t.page=0===e?1:n,n+=t.pagelist.length+1}))})),t.setPagelist(e),t.setBookAvailable(!0),t.setIsPaginating(!1),t.refreshLocation()}))},initEpub:function(t){this.book=new o["a"](t),this.setCurrentBook(this.book),this.setIsPaginating(!0),this.setPaginate(this.$t("book.paginating")),this.initRendition(),this.initGuest(),this.parseBook()}},mounted:function(){var t=this;this.$route.params.fileName.indexOf("|")>0?this.setFileName(this.$route.params.fileName.split("|").join("/")).then((function(){t.initEpub("".concat("http://47.99.166.157/epub","/").concat(t.fileName,".epub")),t.isOnline=!1})):this.setFileName(this.$route.params.fileName).then((function(){Object(s["b"])(t.fileName,(function(e,i){if(!e)if(i)t.isOnline=!1,t.initEpub(i);else{t.isOnline=!0;var n=t.$route.query.opf;n&&t.initEpub(n)}}))}))}}}).call(this,i("f27d"))},"22e9":function(t,e,i){var n=i("88dd"),o=i("94ac"),r=i("8b37")("match");t.exports=function(t){var e;return n(t)&&(void 0!==(e=t[r])?!!e:"RegExp"==o(t))}},2338:function(t,e,i){var n=i("b2f5"),o=i("2e9a"),r=i("3a68"),s=i("acb9"),a=i("f59b");n(n.S,"Object",{getOwnPropertyDescriptors:function(t){var e,i,n=r(t),c=s.f,u=o(n),h={},f=0;while(u.length>f)i=c(n,e=u[f++]),void 0!==i&&a(h,e,i);return h}})},"2e9a":function(t,e,i){var n=i("a891"),o=i("f7c1"),r=i("a013"),s=i("3754").Reflect;t.exports=s&&s.ownKeys||function(t){var e=n.f(r(t)),i=o.f;return i?e.concat(i(t)):e}},"35fb":function(t,e,i){"use strict";function n(t){if(Array.isArray(t)){for(var e=0,i=new Array(t.length);e<t.length;e++)i[e]=t[e];return i}}function o(t){if(Symbol.iterator in Object(t)||"[object Arguments]"===Object.prototype.toString.call(t))return Array.from(t)}function r(){throw new TypeError("Invalid attempt to spread non-iterable instance")}function s(t){return n(t)||o(t)||r()}i.d(e,"a",(function(){return s}))},"3b54":function(t,e,i){"use strict";var n=i("2f03")(!0);i("7656")(String,"String",(function(t){this._t=String(t),this._i=0}),(function(){var t,e=this._t,i=this._i;return i>=e.length?{value:void 0,done:!0}:(t=n(e,i),this._i+=t.length,{value:t,done:!1})}))},"3c6b":function(t,e,i){"use strict";var n=i("a013"),o=i("b146"),r=i("b0f4"),s=i("35dd");i("629c")("match",1,(function(t,e,i,a){return[function(i){var n=t(this),o=void 0==i?void 0:i[e];return void 0!==o?o.call(i,n):new RegExp(i)[e](String(n))},function(t){var e=a(i,t,this);if(e.done)return e.value;var c=n(t),u=String(this);if(!c.global)return s(c,u);var h=c.unicode;c.lastIndex=0;var f,l=[],m=0;while(null!==(f=s(c,u))){var d=String(f[0]);l[m]=d,""===d&&(c.lastIndex=r(u,o(c.lastIndex),h)),m++}return 0===m?null:l}]}))},"4c39":function(t,e){var i,n,o=t.exports={};function r(){throw new Error("setTimeout has not been defined")}function s(){throw new Error("clearTimeout has not been defined")}function a(t){if(i===setTimeout)return setTimeout(t,0);if((i===r||!i)&&setTimeout)return i=setTimeout,setTimeout(t,0);try{return i(t,0)}catch(e){try{return i.call(null,t,0)}catch(e){return i.call(this,t,0)}}}function c(t){if(n===clearTimeout)return clearTimeout(t);if((n===s||!n)&&clearTimeout)return n=clearTimeout,clearTimeout(t);try{return n(t)}catch(e){try{return n.call(null,t)}catch(e){return n.call(this,t)}}}(function(){try{i="function"===typeof setTimeout?setTimeout:r}catch(t){i=r}try{n="function"===typeof clearTimeout?clearTimeout:s}catch(t){n=s}})();var u,h=[],f=!1,l=-1;function m(){f&&u&&(f=!1,u.length?h=u.concat(h):l=-1,h.length&&d())}function d(){if(!f){var t=a(m);f=!0;var e=h.length;while(e){u=h,h=[];while(++l<e)u&&u[l].run();l=-1,e=h.length}u=null,f=!1,c(t)}}function b(t,e){this.fun=t,this.array=e}function v(){}o.nextTick=function(t){var e=new Array(arguments.length-1);if(arguments.length>1)for(var i=1;i<arguments.length;i++)e[i-1]=arguments[i];h.push(new b(t,e)),1!==h.length||f||a(d)},b.prototype.run=function(){this.fun.apply(null,this.array)},o.title="browser",o.browser=!0,o.env={},o.argv=[],o.version="",o.versions={},o.on=v,o.addListener=v,o.once=v,o.off=v,o.removeListener=v,o.removeAllListeners=v,o.emit=v,o.prependListener=v,o.prependOnceListener=v,o.listeners=function(t){return[]},o.binding=function(t){throw new Error("process.binding is not supported")},o.cwd=function(){return"/"},o.chdir=function(t){throw new Error("process.chdir is not supported")},o.umask=function(){return 0}},5158:function(t,e,i){"use strict";i.r(e);var n=function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("div",{staticClass:"ebook-reader"},[i("div",{staticClass:"ebook-reader-mask",on:{touchmove:t.move,touchend:t.moveEnd,mousedown:function(e){return!e.type.indexOf("key")&&t._k(e.keyCode,"left",37,e.key,["Left","ArrowLeft"])?null:"button"in e&&0!==e.button?null:t.onMouseEnter(e)},mousemove:function(e){return!e.type.indexOf("key")&&t._k(e.keyCode,"left",37,e.key,["Left","ArrowLeft"])?null:"button"in e&&0!==e.button?null:t.onMouseMove(e)},mouseup:function(e){return!e.type.indexOf("key")&&t._k(e.keyCode,"left",37,e.key,["Left","ArrowLeft"])?null:"button"in e&&0!==e.button?null:t.onMouseEnd(e)},click:t.onMaskClick}}),t._m(0)])},o=[function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("div",{staticClass:"read-wrapper"},[i("div",{attrs:{id:"read"}})])}],r=i("127b"),s=r["a"],a=(i("84eb"),i("6691")),c=Object(a["a"])(s,n,o,!1,null,"331b5596",null);e["default"]=c.exports},"5b18":function(t,e,i){"use strict";var n=i("b2f5"),o=i("b146"),r=i("91a1"),s="startsWith",a=""[s];n(n.P+n.F*i("984f")(s),"String",{startsWith:function(t){var e=r(this,t,s),i=o(Math.min(arguments.length>1?arguments[1]:void 0,e.length)),n=String(t);return a?a.call(e,n,i):e.slice(i,i+n.length)===n}})},7364:function(t,e,i){var n=i("ddf7").f,o=Function.prototype,r=/^\s*function ([^ (]*)/,s="name";s in o||i("dad2")&&n(o,s,{configurable:!0,get:function(){try{return(""+this).match(r)[1]}catch(t){return""}}})},"7bc1":function(t,e,i){"use strict";var n=i("22e9"),o=i("a013"),r=i("0d5f"),s=i("b0f4"),a=i("b146"),c=i("35dd"),u=i("1f98"),h=i("b6f1"),f=Math.min,l=[].push,m="split",d="length",b="lastIndex",v=4294967295,p=!h((function(){RegExp(v,"y")}));i("629c")("split",2,(function(t,e,i,h){var g;return g="c"=="abbc"[m](/(b)*/)[1]||4!="test"[m](/(?:)/,-1)[d]||2!="ab"[m](/(?:ab)*/)[d]||4!="."[m](/(.?)(.?)/)[d]||"."[m](/()()/)[d]>1||""[m](/.?/)[d]?function(t,e){var o=String(this);if(void 0===t&&0===e)return[];if(!n(t))return i.call(o,t,e);var r,s,a,c=[],h=(t.ignoreCase?"i":"")+(t.multiline?"m":"")+(t.unicode?"u":"")+(t.sticky?"y":""),f=0,m=void 0===e?v:e>>>0,p=new RegExp(t.source,h+"g");while(r=u.call(p,o)){if(s=p[b],s>f&&(c.push(o.slice(f,r.index)),r[d]>1&&r.index<o[d]&&l.apply(c,r.slice(1)),a=r[0][d],f=s,c[d]>=m))break;p[b]===r.index&&p[b]++}return f===o[d]?!a&&p.test("")||c.push(""):c.push(o.slice(f)),c[d]>m?c.slice(0,m):c}:"0"[m](void 0,0)[d]?function(t,e){return void 0===t&&0===e?[]:i.call(this,t,e)}:i,[function(i,n){var o=t(this),r=void 0==i?void 0:i[e];return void 0!==r?r.call(i,o,n):g.call(String(o),i,n)},function(t,e){var n=h(g,t,this,e,g!==i);if(n.done)return n.value;var u=o(t),l=String(this),m=r(u,RegExp),d=u.unicode,b=(u.ignoreCase?"i":"")+(u.multiline?"m":"")+(u.unicode?"u":"")+(p?"y":"g"),y=new m(p?u:"^(?:"+u.source+")",b),k=void 0===e?v:e>>>0;if(0===k)return[];if(0===l.length)return null===c(y,l)?[l]:[];var O=0,w=0,S=[];while(w<l.length){y.lastIndex=p?w:0;var F,T=c(y,p?l:l.slice(w));if(null===T||(F=f(a(y.lastIndex+(p?0:w)),l.length))===O)w=s(l,w,d);else{if(S.push(l.slice(O,w)),S.length===k)return S;for(var j=1;j<=T.length-1;j++)if(S.push(T[j]),S.length===k)return S;w=O=F}}return S.push(l.slice(O)),S}]}))},"84eb":function(t,e,i){"use strict";var n=i("c713"),o=i.n(n);o.a},"91a1":function(t,e,i){var n=i("22e9"),o=i("f01a");t.exports=function(t,e,i){if(n(e))throw TypeError("String#"+i+" doesn't accept regex!");return String(o(t))}},"984f":function(t,e,i){var n=i("8b37")("match");t.exports=function(t){var e=/./;try{"/./"[t](e)}catch(i){try{return e[n]=!1,!"/./"[t](e)}catch(o){}}return!0}},ac0d:function(t,e,i){"use strict";i("2338"),i("fb37"),i("34a3"),i("5b18"),i("7364"),i("f763");function n(t,e,i){return e in t?Object.defineProperty(t,e,{value:i,enumerable:!0,configurable:!0,writable:!0}):t[e]=i,t}var o=i("591a"),r=i("5de6"),s=i("fa7d"),a=i("e8ec");function c(t,e){var i=Object.keys(t);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(t);e&&(n=n.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),i.push.apply(i,n)}return i}function u(t){for(var e=1;e<arguments.length;e++){var i=null!=arguments[e]?arguments[e]:{};e%2?c(i,!0).forEach((function(e){n(t,e,i[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(i)):c(i).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(i,e))}))}return t}i.d(e,"b",(function(){return h})),i.d(e,"a",(function(){return f}));var h={computed:u({},Object(o["c"])(["fileName","menuVisible","settingVisible","defaultFontSize","defaultFontFamily","fontFamilyVisible","defaultTheme","bookAvailable","progress","section","isPaginating","currentBook","navigation","cover","metadata","paginate","pagelist","offsetY","isBookmark","speakingIconBottom"]),{themeList:function(){return Object(r["o"])(this)},getSectionName:function(){if(this.section){var t=this.currentBook.section(this.section);if(t&&t.href&&this.currentBook&&this.currentBook.navigation)return this.navigation[this.section].label}}}),data:function(){return{fontSizeList:r["b"],fontFamily:r["a"]}},methods:u({},Object(o["b"])(["setFileName","setMenuVisible","setSettingVisible","setDefaultFontSize","setDefaultFontFamily","setFontFamilyVisible","setDefaultTheme","setBookAvailable","setProgress","setSection","setIsPaginating","setCurrentBook","setNavigation","setCover","setMetadata","setPaginate","setPagelist","setOffsetY","setIsBookmark","setSpeakingIconBottom"]),{showFontFamilySetting:function(){this.setFontFamilyVisible(!0)},showSetting:function(t){this.setSettingVisible(t)},hideMenuVisible:function(){this.setMenuVisible(!1),this.setSettingVisible(-1),this.setFontFamilyVisible(!1)},toggleMenuVisible:function(){this.menuVisible&&(this.setSettingVisible(-1),this.setFontFamilyVisible(!1)),this.setMenuVisible(!this.menuVisible)},hideFontFamilySetting:function(){this.setFontFamilyVisible(!1)},setGlobalTheme:function(t){switch(Object(s["e"])(),t){case"Default":Object(s["a"])("".concat("http://47.99.166.157/book/res","/theme/theme_default.css"));break;case"Eye":Object(s["a"])("".concat("http://47.99.166.157/book/res","/theme/theme_eye.css"));break;case"Gold":Object(s["a"])("".concat("http://47.99.166.157/book/res","/theme/theme_gold.css"));break;case"Night":Object(s["a"])("".concat("http://47.99.166.157/book/res","/theme/theme_night.css"));break;default:this.setDefaultTheme("Default"),Object(s["a"])("".concat("http://47.99.166.157/book/res","/theme/theme_default.css"));break}},registerTheme:function(){var t=this;this.themeList.forEach((function(e){t.currentBook.rendition.themes.register(e.name,e.style)}))},switchTheme:function(){var t=this,e=this.themeList.filter((function(e){return e.name===t.defaultTheme}))[0];this.defaultFontFamily&&"Default"!==this.defaultFontFamily?e.style.body["font-family"]="".concat(this.defaultFontFamily,"!important"):e.style.body["font-family"]="Times New Roman!important",this.registerTheme(),this.currentBook.rendition.themes.select(this.defaultTheme),this.currentBook.rendition.themes.fontSize(this.defaultFontSize),this.setGlobalTheme(this.defaultTheme)},setFontSize:function(t){var e=this;this.setDefaultFontSize(t).then((function(){e.switchTheme(),a["n"](e.fileName,t)}))},setTheme:function(t){var e=this;this.setDefaultTheme(t).then((function(){e.switchTheme(),a["u"](e.fileName,t)}))},setFontFamily:function(t){var e=this;this.setDefaultFontFamily(t).then((function(){e.switchTheme(),a["m"](e.fileName,t)}))},displaySection:function(t){var e=this,i=this.currentBook.section(this.section);i&&i.href&&this.currentBook.rendition.display(i.href).then((function(){e.refreshLocation(),t&&t()}))},displayProgress:function(){var t=this,e=this.currentBook.locations.cfiFromPercentage(this.progress/100);this.currentBook.rendition.display(e).then((function(){t.refreshLocation()}))},display:function(t){var e=this,i=arguments.length>1&&void 0!==arguments[1]&&arguments[1];t?this.currentBook.rendition.display(t).then((function(){i&&t.startsWith("epubcfi")&&e.currentBook.getRange(t).then((function(i){e.currentBook.rendition.annotations.highlight(t,{},(function(t){}))})),e.refreshLocation()})):this.currentBook.rendition.display().then((function(){e.refreshLocation()})),this.hideMenuVisible()},refreshLocation:function(){var t=this.currentBook.rendition.currentLocation();if(t.start&&t.start.index){this.setSection(t.start.index);var e=this.currentBook.locations.percentageFromCfi(t.start.cfi);this.setProgress(Math.floor(100*e)),this.pagelist?t.start.location<=0?this.setPaginate(""):this.setPaginate(t.start.location+" / "+this.pagelist.length):this.setPaginate("");var i=t.start.cfi,n=a["b"](this.fileName);n&&n.some((function(t){return t.cfi===i}))?this.setIsBookmark(!0):this.setIsBookmark(!1),a["q"](this.fileName,i)}},getReadTime:function(){return this.$t("book.haveRead").replace("$1",Object(r["i"])(this.fileName))}})},f={methods:{showBookDetail:function(t){Object(r["m"])(this,t)}}}},c713:function(t,e,i){},f59b:function(t,e,i){"use strict";var n=i("ddf7"),o=i("7dea");t.exports=function(t,e,i){e in t?n.f(t,e,o(0,i)):t[e]=i}},f9f2:function(t,e,i){var n=i("b2f5"),o=i("a4cc"),r=i("b6f1");t.exports=function(t,e){var i=(o.Object||{})[t]||Object[t],s={};s[t]=e(i),n(n.S+n.F*r((function(){i(1)})),"Object",s)}},fb37:function(t,e,i){var n=i("db4b"),o=i("cfc7");i("f9f2")("keys",(function(){return function(t){return o(n(t))}}))}}]);
//# sourceMappingURL=chunk-2e559d47.fd1e94f4.js.map